{% set name = "openmdao" %}
{% set version = "3.17.0" %}

package:
  name: {{ name }}
  version: {{ version }}

source:
  url: https://pypi.io/packages/source/{{ name[0] }}/{{ name }}/{{ name }}-{{ version }}.tar.gz
  sha256: 8796201407c7af09b008a9fe56023dd9b1b8118a329a8e1e78100f439eb88cbe

build:
  noarch: python
  number: 0
  script: {{ PYTHON }} -m pip install . -vv
  entry_points:
    - wingproj = openmdao.devtools.wingproj:run_wing
    - webview = openmdao.utils.webview:webview_argv
    - run_om_test = openmdao.devtools.run_test:run_test
    - openmdao = openmdao.utils.om:openmdao_cmd
    - reset_notebook = openmdao.devtools.docutils:reset_notebook_cmd

requirements:
  host:
    - python >=3.7
    - pip
  run:
    - networkx >=2.0
    - numpy
    - pydoe2
    - pyparsing
    - python >=3.7
    - requests
    - scipy

test:
  requires:
    - parameterized
    - numpydoc >=0.9.1
    - pycodestyle >=2.4.0
    # some solving issues? 
    # - pydocstyle ==2.0.0
    - testflo >=1.3.6
    - aiounittest
    # not fully testing viz YET, but does fulfill undocumented tornado dep
    - bokeh >=1.3.4
    - colorama
    # - matplotlib-base
    - notebook
    - tabulate
    # for pip check
    - pip
    # from sphinx
    - jinja2 >=2.3,<3.0
    - markupsafe <2.0
  imports:
    - openmdao
  commands:
    - python -m pip check
    - openmdao --help
    - webview --help
    - wingproj --help

about:
  home: https://openmdao.org
  license: Apache-2.0
  license_family: Apache
  license_file: LICENSE.txt
  summary: OpenMDAO framework infrastructure
  description: |
    OpenMDAO is an open-source high-performance computing platform
    for systems analysis and multidisciplinary optimization, written in Python. It
    enables you to decompose your models, making them easier to build and maintain,
    while still solving them in a tightly coupled manner with efficient parallel
    numerical methods.
  doc_url: https://openmdao.org/twodocs
  dev_url: https://github.com/OpenMDAO/OpenMDAO
  doc_source_url: https://github.com/OpenMDAO/OpenMDAO/tree/master/openmdao/docs

extra:
  recipe-maintainers:
    - bollwyvl
